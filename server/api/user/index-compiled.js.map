{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,SAAR,CAAV;AACJ,IAAI,aAAa,QAAQ,mBAAR,CAAb;AACJ,IAAI,SAAS,QAAQ,0BAAR,CAAT;AACJ,IAAI,OAAO,QAAQ,yBAAR,CAAP;AACJ,IAAI,SAAS,QAAQ,MAAR,EAAT;;;AAGJ,IAAI,WAAW,QAAQ,eAAR,EAAyB,wBAAzB,CAAX;;;AAGJ,IAAI,OAAM,QAAQ,cAAR,CAAN;;;AAGJ,IAAI,WAAW,QAAQ,UAAR,EAAoB,OAApB,CAA4B,EAAC,OAAM,IAAN,EAA7B,EAA0C,UAA1C;;AAIf,OAAO,GAAP,CAAW,GAAX,EAAe,WAAW,KAAX,CAAf;AACA,OAAO,IAAP,CAAY,WAAZ,EAAyB,WAAW,UAAX,CAAzB;AACA,OAAO,GAAP,CAAW,UAAX,EAAsB,KAAK,eAAL,EAAtB,EAA6C,SAAS,YAAT,CAA7C,EAAqE,WAAW,OAAX,CAArE;AACA,OAAO,GAAP,CAAW,KAAX,EAAiB,WAAW,WAAX,CAAjB;;AAIA,OAAO,GAAP,CAAW,OAAX,EAAmB,UAAS,GAAT,EAAa,GAAb,EAAiB;;AAElC,WAAS,gBAAT,EAA2B;AACzB,aAAS;AACP,UAAI,CAAC,EAAC,OAAO,qBAAP,EAA8B,MAAM,gBAAN,EAAhC,CAAJ;AACA,kBAAY,8BAAZ;AACA,eAAS,iBAAT;AACA,YAAM,4CAAN;KAJF;GADF,EAOG,UAAS,KAAT,EAAgB,QAAhB,EACH;;AAEE,QAAI,KAAJ,EAAW,QAAQ,GAAR,CAAa,KAAK,SAAL,CAAe,KAAf,CAAb;;;AAAX,SAGK,QAAQ,GAAR,CAAY,QAAZ,EAHL;GAHC,CAPH,CAFkC;;AAkBlC,MAAI,IAAJ,CAAS,EAAC,UAAS,YAAT,EAAV,EAlBkC;CAAjB,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA,OAAO,OAAP,GAAiB,MAAjB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar controller = require('./user.controller');\nvar config = require('../../config/environment');\nvar auth = require('../../auth/auth.service');\nvar router = express.Router();\n//var sendgrid  = require('sendgrid')('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');\n\nvar mandrill = require('node-mandrill')('owQ7XSkk5JPrEEITDL9K6g');\n\n//self\nvar user =require('./user.model');\n\n//cache response of data\nvar apicache = require('apicache').options({debug:true}).middleware;\n\n\n\nrouter.get('/',controller.index);\nrouter.post('/register', controller.createUser);\nrouter.get('/profile',auth.isAuthenticated(),apicache('30 minutes'), controller.profile);\nrouter.get('/lb',controller.leaderboard);\n\n\n\nrouter.get('/test',function(req,res){\n  //send an e-mail to jim rubenstein\n  mandrill('/messages/send', {\n    message: {\n      to: [{email: 'sandy86sr@gmail.com', name: 'Jim Rubenstein'}],\n      from_email: 'dcr@festnimbus.herokuapp.com',\n      subject: \"Hey, what's up?\",\n      text: \"Hello, I sent this message using mandrill.\"\n    }\n  }, function(error, response)\n  {\n    //uh oh, there was an error\n    if (error) console.log( JSON.stringify(error) );\n\n    //everything's good, lets see what mandrill said\n    else console.log(response);\n  });\n\n  res.json({'status':'email sent'});\n});\n\n\n/*\n  router.post('/register',function(err,user,next){\n    passport.authenticate('local-signup',function(err,user,info){\n      if (err) {\n        return res.end(\"error\")\n      }\n      if (!user) {\n        return res.status(403).json({err: info})\n      }\n      // rand = Math.floor((Math.random() * 100) + 54);\n      host = req.get('host');\n      link = \"http://\" + req.get('host') + \"/verify/\" + user.unique;\n      mailOptions = {\n        to: req.body.email,\n        subject: \"please confirm your email account\",\n        html: \"hllo <br> pleasclick on link to verify<br> <a href=\" + link + \">click here to verify</a>\"\n\n      };\n      console.log(mailOptions);\n      smtpTransport.sendMail(mailOptions, function (error, response) {\n        if (error) {\n          console.log(error);\n          res.end(\"error\");\n        } else {\n          console.log(\"Message sent: \" + response.message);\n          res.end(\"sent\");\n        }\n      })\n    }) (req,res,next);\n\n  });\n\n\n*/\n\nmodule.exports = router;\n"]}