{"version":3,"sources":["passport.js"],"names":[],"mappings":"AAAA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,gBAAgB,QAAQ,gBAAR,EAA0B,QAA1B;;AAGpB,QAAQ,KAAR,GAAgB,UAAU,IAAV,EAAgB,MAAhB,EAAwB;AACtC,WAAS,GAAT,CAAa,IAAI,aAAJ,CAAkB;AAC3B,mBAAe,OAAf;AACA,mBAAe,UAAf;AAF2B,GAAlB,EAIX,UAAS,KAAT,EAAgB,QAAhB,EAA0B,IAA1B,EAAgC;AAC9B,SAAK,OAAL,CAAa;AACX,aAAO,MAAM,WAAN,EAAP;KADF,EAEG,UAAS,GAAT,EAAc,IAAd,EAAoB;AACrB,UAAI,GAAJ,EAAS,OAAO,KAAK,GAAL,CAAP,CAAT;;AAEA,UAAI,CAAC,IAAD,EAAO;AACT,eAAO,KAAK,IAAL,EAAW,KAAX,EAAkB,EAAE,MAAM,+BAAN,EAAuC,QAAO,IAAP,EAA3D,CAAP,CADS;OAAX;AAGA,UAAI,CAAC,KAAK,YAAL,CAAkB,QAAlB,CAAD,EAA8B;AAChC,eAAO,KAAK,IAAL,EAAW,KAAX,EAAkB,EAAE,MAAM,+BAAN,EAAuC,QAAO,IAAP,EAA3D,CAAP,CADgC;OAAlC;;AAKA,aAAO,KAAK,IAAL,EAAW,IAAX,CAAP,CAXqB;KAApB,CAFH,CAD8B;GAAhC,CAJF,EADsC;CAAxB","file":"passport-compiled.js","sourcesContent":["var passport = require('passport');\nvar LocalStrategy = require('passport-local').Strategy;\n\n\nexports.setup = function (User, config) {\n  passport.use(new LocalStrategy({\n      usernameField: 'email',\n      passwordField: 'password' // this is the virtual field on the model\n    },\n    function(email, password, done) {\n      User.findOne({\n        email: email.toLowerCase()\n      }, function(err, user) {\n        if (err) return done(err);\n\n        if (!user) {\n          return done(null, false, { data: 'This email is not registered.', status:'OK' });\n        }\n        if (!user.authenticate(password)) {\n          return done(null, false, { data: 'This password is not correct.', status:'OK' });\n        }\n        \n\n        return done(null, user);\n      });\n    }\n  ));\n};\n"]}