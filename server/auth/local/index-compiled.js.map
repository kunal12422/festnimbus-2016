{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,SAAR,CAAV;AACJ,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,OAAO,QAAQ,iBAAR,CAAP;;AAEJ,IAAI,SAAS,QAAQ,MAAR,EAAT;;;;;AAMJ,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACxC,WAAS,YAAT,CAAsB,OAAtB,EAA+B,UAAU,GAAV,EAAe,IAAf,EAAqB,IAArB,EAA2B;AACxD,QAAI,QAAQ,OAAO,IAAP,CAD4C;AAExD,QAAI,KAAJ,EAAW,OAAO,IAAI,IAAJ,CAAS,KAAT,EAAe,KAAf,CAAP,CAAX;AACA,QAAI,CAAC,IAAD,EAAO,OAAO,IAAI,IAAJ,CAAS,GAAT,EAAc,IAAd,CAAmB,EAAC,QAAQ,yCAAR,EAAmD,UAAS,IAAT,EAAvE,CAAP,CAAX;;AAEA,QAAI,QAAQ,KAAK,SAAL,CAAe,KAAK,GAAL,EAAU,KAAK,IAAL,CAAjC,CALoD;AAMxD,QAAI,IAAJ,CAAS;AACP,gBAAS,uBAAT;AACA,cAAQ,KAAR,EAFF,EANwD;GAA3B,CAA/B,CASG,GATH,EASQ,GATR,EASa,IATb,EADwC;CAAzB,CAAjB;;AAaA,OAAO,OAAP,GAAiB,MAAjB","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar passport = require('passport');\nvar auth = require('../auth.service');\n\nvar router = express.Router();\n\n\n// local login routes\n\n//defines '/auth/local' route\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function (err, user, info) {\n    var error = err || info;\n    if (error) return res.json('401',error);\n    if (!user) return res.send(404).json({'data': 'Something went wrong, please try again.', 'status':'OK'});\n\n    var token = auth.signToken(user._id, user.role);\n    res.json({\n      'status':'loggedin successfully',\n      'data': token});\n  })(req, res, next)\n});\n\nmodule.exports = router;\n\n"]}